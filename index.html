<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în T·∫≠p Qu·∫£n Tr·ªã Nh√† H√†ng</title>
    <style>
        :root {
            --primary: #4F46E5;
            --primary-hover: #4338ca;
            --background: #F3F4F6;
            --card-bg: #FFFFFF;
            --text-main: #1F2937;
            --text-secondary: #6B7280;
            --success: #10B981;
            --error: #EF4444;
            --border-radius: 12px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text-main);
            line-height: 1.5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            /* Increased from 600px */
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: var(--primary);
        }

        .screen {
            display: none;
            background: var(--card-bg);
            padding: 24px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            animation: fadeIn 0.3s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Setup Screen */
        .mode-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }

        .mode-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .mode-btn:hover {
            border-color: var(--primary);
            background: #EEF2FF;
        }

        .mode-btn .icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .mode-btn .text {
            font-weight: 600;
        }

        .chapter-selection {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #E5E7EB;
        }

        .chapter-selection label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
        }

        /* Game Screen */
        .progress-bar {
            height: 6px;
            background: #E5E7EB;
            border-radius: 3px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .card-container {
            margin-bottom: 24px;
        }

        .question {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        /* Multiple Choice Styles */
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            padding: 16px;
            text-align: left;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .option-btn:hover:not(:disabled) {
            background: #F9FAFB;
            border-color: var(--primary);
        }

        .option-btn.correct {
            background: #D1FAE5;
            border-color: var(--success);
            color: #065F46;
        }

        .option-btn.wrong {
            background: #FEE2E2;
            border-color: var(--error);
            color: #991B1B;
        }

        /* Fill Blank Styles */
        .blank-area {
            line-height: 2.5;
            font-size: 1.05rem;
            text-align: justify;
        }

        .blank-input {
            border: none;
            border-bottom: 2px solid #9CA3AF;
            background: transparent;
            font-family: inherit;
            font-size: inherit;
            color: var(--primary);
            padding: 0 4px;
            width: 120px;
            text-align: center;
            transition: all 0.2s;
            outline: none;
        }

        .blank-input:focus {
            border-bottom-color: var(--primary);
            background: #EEF2FF;
        }

        /* Essay Mode Styles */
        .essay-input {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            line-height: 1.5;
            resize: vertical;
            margin-top: 10px;
        }

        .essay-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        /* Correct Answer Box */
        .correct-answer-box {
            margin-top: 20px;
            padding: 16px;
            background-color: #ECFDF5;
            border: 1px solid #10B981;
            border-radius: 8px;
            color: #064E3B;
            animation: fadeIn 0.3s ease-in-out;
        }

        .correct-answer-box h4 {
            margin-bottom: 8px;
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #059669;
        }

        .correct-answer-box p {
            line-height: 1.6;
        }

        /* Map Screen Styles */
        .map-stats {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--primary);
            background: #EEF2FF;
            padding: 8px;
            border-radius: 8px;
        }

        .question-map {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 10px;
            padding: 10px;
            max-height: 60vh;
            overflow-y: auto;
        }

        /* Sidebar Layout */
        .game-container {
            display: flex;
            height: 100%;
            gap: 24px;
            /* Increased gap */
        }

        /* Make game-screen transparent container */
        #game-screen {
            background: transparent;
            box-shadow: none;
            padding: 0;
        }

        #question-sidebar {
            width: 280px;
            /* Increased from 220px */
            background: var(--card-bg);
            /* White card */
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow-y: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            flex-shrink: 0;
            max-height: 80vh;
            border-right: none;
            /* Remove border */
        }

        #question-main-content {
            flex: 1;
            background: var(--card-bg);
            /* White card */
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow-y: auto;
            padding: 24px;
        }

        .sidebar-item {
            padding: 10px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .sidebar-item:hover {
            background: #e9ecef;
        }

        .sidebar-item.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .sidebar-item.memorized {
            border-left: 4px solid var(--success);
        }

        .sidebar-item.not-memorized {
            border-left: 4px solid var(--danger);
        }

        /* Mobile responsive for sidebar */
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }

            #question-sidebar {
                width: 100%;
                max-height: 150px;
                flex-direction: row;
                overflow-x: auto;
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }

            .sidebar-item {
                min-width: 60px;
                text-align: center;
            }
        }

        .map-item {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .map-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .map-item.memorized {
            background-color: #D1FAE5;
            border-color: #10B981;
            color: #065F46;
        }

        .map-item.not-memorized {
            background-color: #FEE2E2;
            border-color: #EF4444;
            color: #991B1B;
        }

        .map-legend {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .dot.green {
            background-color: #10B981;
        }

        .dot.red {
            background-color: #EF4444;
        }

        .dot.gray {
            background-color: #E5E7EB;
        }

        /* Status Buttons */
        .btn.success {
            background-color: var(--success);
            color: white;
        }

        .btn.success:hover {
            background-color: #059669;
        }

        .btn.danger {
            background-color: var(--error);
            color: white;
        }

        .btn.danger:hover {
            background-color: #DC2626;
        }

        /* Controls */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 24px;
        }

        #status-btns {
            display: flex;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
        }

        .btn.primary {
            background: var(--primary);
            color: white;
        }

        .btn.primary:disabled {
            background: #9CA3AF;
            cursor: not-allowed;
        }

        .btn.secondary {
            background: white;
            border: 1px solid #E5E7EB;
            color: var(--text-main);
        }

        .btn.secondary:hover {
            background: #F3F4F6;
        }

        .btn.inactive {
            background: #E5E7EB;
            color: #9CA3AF;
            cursor: default;
            pointer-events: none;
        }

        /* Result Screen */
        #result-screen {
            text-align: center;
        }

        .final-score {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            margin: 30px 0;
        }

        .final-score .total {
            font-size: 1.5rem;
            color: var(--text-secondary);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>√în T·∫≠p Qu·∫£n Tr·ªã Nh√† H√†ng</h1>
            <p>Ch·ªçn ch·∫ø ƒë·ªô ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
        </header>

        <div id="setup-screen" class="screen active">
            <div class="mode-selection">
                <button class="mode-btn" onclick="startApp('fill-blank')">
                    <span class="icon">‚úçÔ∏è</span>
                    <span class="text">ƒêi·ªÅn Khuy·∫øt (√çt)</span>
                </button>
                <button class="mode-btn" onclick="startApp('essay')">
                    <span class="icon">üìù</span>
                    <span class="text">T·ª± Lu·∫≠n</span>
                </button>
            </div>
            <div class="chapter-selection">
                <h3>Ch·ªçn Ch∆∞∆°ng ƒë·ªÉ √¥n t·∫≠p</h3>
                <label><input type="checkbox" value="1" checked> Ch∆∞∆°ng 1: T·ªïng quan</label>
                <label><input type="checkbox" value="2" checked> Ch∆∞∆°ng 2: C∆° c·∫•u t·ªï ch·ª©c</label>
                <label><input type="checkbox" value="3" checked> Ch∆∞∆°ng 3: Quy tr√¨nh ph·ª•c v·ª•</label>
                <label><input type="checkbox" value="4" checked> Ch∆∞∆°ng 4: T·ªï ch·ª©c ti·ªác & H·ªôi ngh·ªã</label>
                <label><input type="checkbox" value="5" checked> Ch∆∞∆°ng 5: L·∫≠p k·∫ø ho·∫°ch & Gi√°m s√°t</label>
                <label><input type="checkbox" value="7" checked> Ch∆∞∆°ng 7: Qu·∫£n tr·ªã doanh thu & Chi ph√≠</label>
            </div>
        </div>

        <div id="map-screen" class="screen">
            <h3>Danh S√°ch C√¢u H·ªèi</h3>
            <div id="map-stats" class="map-stats">
                ƒê√£ thu·ªôc: <span id="memorized-count">0</span> / <span id="total-count">0</span>
            </div>
            <div class="map-legend">
                <span class="legend-item"><span class="dot green"></span> ƒê√£ thu·ªôc</span>
                <span class="legend-item"><span class="dot red"></span> Ch∆∞a thu·ªôc</span>
                <span class="legend-item"><span class="dot gray"></span> Ch∆∞a l√†m</span>
            </div>
            <div id="question-map" class="question-map">
                <!-- Grid injected by JS -->
            </div>
            <div class="controls" style="margin-top: 20px;">
                <button class="btn secondary" onclick="returnToMenu()">V·ªÅ Menu Ch√≠nh</button>
                <button class="btn danger" onclick="resetStatus()">Reset Tr·∫°ng Th√°i</button>
            </div>
        </div>

        <div id="game-screen" class="screen">
            <div class="game-container">
                <div id="question-sidebar"></div>
                <div id="question-main-content">
                    <div class="header">
                        <button class="btn secondary" onclick="showMap()">V·ªÅ Danh S√°ch</button>
                    </div>
                    <div id="question-count">C√¢u 0/0</div>
                    <div id="card-container" class="card-container">
                        <!-- Content injected by JS -->
                    </div>
                    <div class="controls">
                        <button id="check-btn" class="btn primary" onclick="checkAnswer()">Ki·ªÉm Tra</button>
                        <div id="status-btns" style="display: none; gap: 10px; justify-content: center;">
                            <button class="btn success" onclick="markStatus('memorized')">ƒê√£ Thu·ªôc</button>
                            <button class="btn danger" onclick="markStatus('not-memorized')">Ch∆∞a Thu·ªôc</button>
                        </div>
                    </div>
                    <div id="correct-answer-box" class="correct-answer-box" style="display: none;">
                        <h4>ƒê√°p √Ån ƒê√∫ng:</h4>
                        <p id="correct-answer-text"></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="result-screen" class="screen">
            <h2>K·∫øt Th√∫c!</h2>
            <div class="final-score">
                <span id="final-score-display">0</span>
                <span class="total">/ 100</span>
            </div>
            <button class="btn primary" onclick="returnToMenu()">L√†m L·∫°i</button>
        </div>
    </div>

    <script>
        // CH∆Ø∆†NG 1: T·ªîNG QUAN
        const ch1_questions = [
            { id: 101, chapter: 1, question: "Kh√°i ni·ªám nh√† h√†ng?", answer: "L√† c∆° s·ªü kinh doanh chuy√™n ch·∫ø bi·∫øn v√† ph·ª•c v·ª• c√°c s·∫£n ph·∫©m ƒÉn u·ªëng nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu c·∫ßn thi·∫øt v√† c√°c nhu c·∫ßu kh√°c c·ªßa kh√°ch h√†ng v·ªõi m·ª•c ƒë√≠ch ch·ªß y·∫øu l√† thu l·ª£i nhu·∫≠n." },
            { id: 102, chapter: 1, question: "Kh√°i ni·ªám b·ªô ph·∫≠n d·ªãch v·ª• nh√† h√†ng?", answer: "L√† b·ªô ph·∫≠n kinh doanh ph·ª•c v·ª• nhu c·∫ßu ƒÉn u·ªëng t·∫°i kh√°ch s·∫°n, ph·ª•c v·ª• ch·ªß y·∫øu cho kh√°ch du l·ªãch, h·ªôi ngh·ªã, v√£ng lai, ti·ªác c∆∞·ªõi, sinh nh·∫≠t, li√™n hoan." },
            { id: 103, chapter: 1, question: "Kh√°i ni·ªám Bar?", answer: "L√† n∆°i kinh doanh ph·ª•c v·ª• ƒë·ªì u·ªëng, m·ªôt s·ªë ƒë·ªì ƒÉn nh·∫π v√† m·ªôt s·ªë ho·∫°t ƒë·ªông kh√°c nh·∫±m ƒë√°p ·ª©ng nhu c·∫ßu ƒÉn u·ªëng v√† gi·∫£i tr√≠ c·ªßa kh√°ch." },
            { id: 104, chapter: 1, question: "Kh√°i ni·ªám b·ªô ph·∫≠n Ti·ªác?", answer: "L√† b·ªô ph·∫≠n ph·ª• tr√°ch t·ªï ch·ª©c ti·ªác, h·ªôi ngh·ªã trong kh√°ch s·∫°n, tr·ª±c thu·ªôc kh·ªëi FnB, ƒë·∫£m b·∫£o s·ª± ki·ªán di·ªÖn ra thu·∫≠n l·ª£i, th√†nh c√¥ng." },
            { id: 105, chapter: 1, question: "Ch·ª©c nƒÉng t·ªï ch·ª©c ph·ª•c v·ª• c·ªßa nh√† h√†ng?", answer: "T·∫°o ƒëi·ªÅu ki·ªán ƒë·ªÉ kh√°ch ti√™u th·ª•, ngh·ªâ ng∆°i, th∆∞ gi√£n; ph·ª•c v·ª• s·∫£n ph·∫©m t·ª± ch·∫ø bi·∫øn v√† s·∫£n ph·∫©m chuy·ªÉn b√°n; ƒë√≤i h·ªèi c∆° s·ªü v·∫≠t ch·∫•t ti·ªán nghi v√† nh√¢n vi√™n chuy√™n nghi·ªáp." },
            { id: 106, chapter: 1, question: "Ch·ª©c nƒÉng b√°n s·∫£n ph·∫©m c·ªßa nh√† h√†ng?", answer: "Trao ƒë·ªïi v√† b√°n c√°c th√†nh ph·∫©m (m√≥n ƒÉn, ƒë·ªì u·ªëng) t·ª´ n∆°i s·∫£n xu·∫•t ƒë·∫øn n∆°i ti√™u d√πng, mang l·∫°i doanh thu cho nh√† h√†ng." },
            { id: 107, chapter: 1, question: "Ch·ª©c nƒÉng s·∫£n xu·∫•t c·ªßa nh√† h√†ng?", answer: "Ch·∫ø bi·∫øn th·ª©c ƒÉn t·ª´ nguy√™n li·ªáu th√¥ th√†nh m√≥n ƒÉn ch√≠n, ƒë·ªì u·ªëng, ƒë·∫£m b·∫£o an to√†n th·ª±c ph·∫©m, h∆∞∆°ng v·ªã v√† th·∫©m m·ªπ." },
            { id: 108, chapter: 1, question: "Ch·ª©c nƒÉng c·ªßa b·ªô ph·∫≠n Bar: Pha ch·∫ø?", answer: "Pha ch·∫ø v√† ph·ª•c v·ª• ƒë·ªì u·ªëng (cocktail, mocktail, r∆∞·ª£u, bia...) ƒë√∫ng c√¥ng th·ª©c, h∆∞∆°ng v·ªã th∆°m ngon, h√¨nh th·ª©c h·∫•p d·∫´n." },
            { id: 109, chapter: 1, question: "Ch·ª©c nƒÉng c·ªßa b·ªô ph·∫≠n Bar: ƒÇn nh·∫π?", answer: "Cung c·∫•p m√≥n ƒÉn nh·∫π (b√°nh ng·ªçt, sandwich, tr√°i c√¢y) ƒë·ªÉ tƒÉng l·ª±a ch·ªçn v√† k√©o d√†i th·ªùi gian kh√°ch ·ªü l·∫°i." },
            { id: 110, chapter: 1, question: "Ch·ª©c nƒÉng c·ªßa b·ªô ph·∫≠n Bar: Ki·ªÉm so√°t?", answer: "Ki·ªÉm so√°t chi ph√≠, theo d√µi nguy√™n li·ªáu, h√†ng t·ªìn kho, ƒë·ªãnh m·ª©c pha ch·∫ø ƒë·ªÉ tr√°nh l√£ng ph√≠." },
            { id: 111, chapter: 1, question: "Ch·ª©c nƒÉng b·ªô ph·∫≠n Ti·ªác: Cung c·∫•p ƒÉn u·ªëng?", answer: "Chu·∫©n b·ªã v√† ph·ª•c v·ª• m√≥n ƒÉn, ƒë·ªì u·ªëng cho c√°c b·ªØa ti·ªác (c∆∞·ªõi, h·ªôi ngh·ªã, gala) ƒë√∫ng ti√™u chu·∫©n v√† th·ªùi gian." },
            { id: 112, chapter: 1, question: "Ch·ª©c nƒÉng b·ªô ph·∫≠n Ti·ªác: Ph·ªëi h·ª£p?", answer: "Ph·ªëi h·ª£p v·ªõi l·ªÖ t√¢n, marketing, k·ªπ thu·∫≠t... ƒë·ªÉ t·ªï ch·ª©c s·ª± ki·ªán, b·ªë tr√≠ kh√¥ng gian, √¢m thanh √°nh s√°ng." },
            { id: 113, chapter: 1, question: "Nhi·ªám v·ª• b·ªô ph·∫≠n nh√† h√†ng: Ph·ª•c v·ª•?", answer: "Ph·ª•c v·ª• kh√°ch ƒÉn u·ªëng ƒë√∫ng gi·ªù, k·ªãp th·ªùi, ch√≠nh x√°c, ƒë√∫ng nguy√™n t·∫Øc v√† thao t√°c k·ªπ thu·∫≠t." },
            { id: 114, chapter: 1, question: "Nhi·ªám v·ª• b·ªô ph·∫≠n nh√† h√†ng: Kh√°ch h√†ng?", answer: "T√¨m hi·ªÉu nhu c·∫ßu kh√°ch, t·∫°o m√¥i tr∆∞·ªùng h·∫•p d·∫´n, x·ª≠ l√Ω t√¨nh hu·ªëng ph√°t sinh." },
            { id: 115, chapter: 1, question: "Nhi·ªám v·ª• b·ªô ph·∫≠n Bar: Pha ch·∫ø?", answer: "Pha ch·∫ø ƒë√∫ng c√¥ng th·ª©c, ch·ªßng lo·∫°i, ƒë·ªãnh l∆∞·ª£ng; ph·ª•c v·ª• ƒë√∫ng tr√¨nh t·ª±, ti√™u chu·∫©n." },
            { id: 116, chapter: 1, question: "Nhi·ªám v·ª• b·ªô ph·∫≠n Bar: Qu·∫£n l√Ω?", answer: "Qu·∫£n l√Ω doanh thu, nguy√™n li·ªáu, h√†ng h√≥a, lao ƒë·ªông; x√¢y d·ª±ng c√¥ng th·ª©c ti√™u chu·∫©n." },
            { id: 117, chapter: 1, question: "Nhi·ªám v·ª• b·ªô ph·∫≠n Ti·ªác: Kinh doanh?", answer: "T√¨m hi·ªÉu nhu c·∫ßu, nh·∫≠n ƒë·∫∑t ti·ªác, x√¢y d·ª±ng k·∫ø ho·∫°ch ph·ª•c v·ª•." },
            { id: 118, chapter: 1, question: "Nhi·ªám v·ª• b·ªô ph·∫≠n Ti·ªác: V·∫≠n h√†nh?", answer: "Ph·ª•c v·ª• ti·ªác theo nhu c·∫ßu, qu·∫£n l√Ω c∆° s·ªü v·∫≠t ch·∫•t, ph·ªëi h·ª£p v·ªõi c√°c b·ªô ph·∫≠n kh√°c." },
            { id: 119, chapter: 1, question: "ƒê·∫∑c ƒëi·ªÉm ho·∫°t ƒë·ªông ph·ª•c v·ª•: T√≠nh ph·ª©c t·∫°p?", answer: "Ph·ª•c v·ª• nhi·ªÅu ƒë·ªëi t∆∞·ª£ng kh√°ch v·ªõi nhu c·∫ßu kh√°c nhau; nh√¢n vi√™n ph·∫£i giao ti·∫øp ph√π h·ª£p v√† am hi·ªÉu ƒëa d·∫°ng m√≥n ƒÉn." },
            { id: 120, chapter: 1, question: "ƒê·∫∑c ƒëi·ªÉm ho·∫°t ƒë·ªông ph·ª•c v·ª•: K·ªπ thu·∫≠t?", answer: "ƒê√≤i h·ªèi k·ªπ thu·∫≠t cao trong quy tr√¨nh ph·ª•c v·ª•, s·∫Øp x·∫øp b√†n, b∆∞ng b√™, v·ªá sinh an to√†n th·ª±c ph·∫©m." },
            { id: 121, chapter: 1, question: "ƒê·∫∑c ƒëi·ªÉm ho·∫°t ƒë·ªông ph·ª•c v·ª•: Ngh·ªá thu·∫≠t?", answer: "Th√°i ƒë·ªô, t√°c phong l√†m vi·ªác ·∫£nh h∆∞·ªüng l·ªõn ƒë·∫øn hi·ªáu qu·∫£ kinh doanh." },
            { id: 122, chapter: 1, question: "ƒê·∫∑c ƒëi·ªÉm ho·∫°t ƒë·ªông ph·ª•c v·ª•: C√¥ng ngh·ªá?", answer: "·ª®ng d·ª•ng ph·∫ßn m·ªÅm ƒë·∫∑t b√†n, g·ªçi m√≥n, thanh to√°n ƒë·ªÉ tƒÉng hi·ªáu qu·∫£ v√† t√≠nh chuy√™n nghi·ªáp." },
            { id: 123, chapter: 1, question: "H√¨nh th·ª©c ƒÇn g·ªçi m√≥n (A la carte)?", answer: "Kh√°ch ch·ªçn m√≥n t·ª´ th·ª±c ƒë∆°n, thanh to√°n theo m√≥n ƒë√£ ch·ªçn, nh√¢n vi√™n ph·ª•c v·ª• tr·ª±c ti·∫øp." },
            { id: 124, chapter: 1, question: "H√¨nh th·ª©c ƒÇn t·ª± ch·ªçn (Buffet)?", answer: "Kh√°ch tr·∫£ ti·ªÅn c·ªë ƒë·ªãnh, t·ª± ch·ªçn m√≥n b√†y s·∫µn, nh√¢n vi√™n h·ªó tr·ª£." },
            { id: 125, chapter: 1, question: "H√¨nh th·ª©c ƒÇn theo th·ª±c ƒë∆°n (Set menu)?", answer: "Kh√°ch ƒÉn theo th·ª±c ƒë∆°n c·ªë ƒë·ªãnh ƒë·∫∑t tr∆∞·ªõc, nh√¢n vi√™n ph·ª•c v·ª• l·∫ßn l∆∞·ª£t c√°c m√≥n." },
            { id: 126, chapter: 1, question: "H√¨nh th·ª©c ƒÇn t·∫°i bu·ªìng (Room Service)?", answer: "Kh√°ch g·ªçi m√≥n l√™n ph√≤ng, thanh to√°n m√≥n v√† ph√≠ d·ªãch v·ª•." },
            { id: 127, chapter: 1, question: "H√¨nh th·ª©c Outside Catering?", answer: "Cung c·∫•p d·ªãch v·ª• ti·ªác t·∫°i ƒë·ªãa ƒëi·ªÉm theo y√™u c·∫ßu c·ªßa kh√°ch h√†ng b√™n ngo√†i kh√°ch s·∫°n." },
            { id: 128, chapter: 1, question: "Qu·∫£n l√Ω b·ªô ph·∫≠n d·ªãch v·ª• nh√† h√†ng l√† ai?", answer: "Ng∆∞·ªùi ch·ªãu tr√°ch nhi·ªám tr∆∞·ªõc TGƒê v√† Gƒê F&B v·ªÅ m·ªçi ho·∫°t ƒë·ªông F&B, duy tr√¨ ch·∫•t l∆∞·ª£ng v√† t·ªëi ƒëa h√≥a doanh thu." },
            { id: 129, chapter: 1, question: "Nhi·ªám v·ª• Qu·∫£n l√Ω nh√† h√†ng (Restaurant Manager)?", answer: "Qu·∫£n l√Ω ho·∫°t ƒë·ªông kinh doanh khu v·ª±c nh√† h√†ng, nh√¢n l·ª±c, t√†i s·∫£n, gi·∫£i quy·∫øt khi·∫øu n·∫°i." },
            { id: 130, chapter: 1, question: "Nhi·ªám v·ª• Qu·∫£n l√Ω Bar (Bar Manager)?", answer: "L·∫≠p k·∫ø ho·∫°ch, ƒëi·ªÅu h√†nh nh√¢n vi√™n pha ch·∫ø/ph·ª•c v·ª•, qu·∫£n l√Ω h√†ng h√≥a, t√†i ch√≠nh qu·∫ßy bar." },
            { id: 131, chapter: 1, question: "Nhi·ªám v·ª• Qu·∫£n l√Ω Ti·ªác (Banquet Manager)?", answer: "L·∫≠p k·∫ø ho·∫°ch, t·ªï ch·ª©c, gi√°m s√°t ph·ª•c v·ª• ti·ªác, b√°o c√°o tr·ª±c ti·∫øp cho Gƒê F&B." }
        ];

        // CH∆Ø∆†NG 2: C∆† C·∫§U T·ªî CH·ª®C & QUY TR√åNH
        const ch2_questions = [
            { id: 201, chapter: 2, question: "Kh√°i ni·ªám nh√† h√†ng trong kh√°ch s·∫°n?", answer: "N∆°i ph·ª•c v·ª• ƒÉn u·ªëng cho kh√°ch (ƒëi·ªÉm t√¢m, tr∆∞a, t·ªëi, ti·ªác) v√† l√† ƒë·∫ßu m·ªëi trung gian ph√¢n ph·ªëi m√≥n ƒÉn." },
            { id: 202, chapter: 2, question: "T·∫≠p qu√°n ƒÉn u·ªëng l√† g√¨?", answer: "Th√≥i quen ƒÉn u·ªëng ƒë√£ th√†nh n·ªÅ n·∫øp trong ƒë·ªùi s·ªëng x√£ h·ªôi, ƒë∆∞·ª£c m·ªçi ng∆∞·ªùi ch·∫•p nh·∫≠n v√† l√†m theo." },
            { id: 203, chapter: 2, question: "Kh·∫©u v·ªã ng∆∞·ªùi Vi·ªát Nam?", answer: "D√πng ƒëa d·∫°ng gia v·ªã (n∆∞·ªõc m·∫Øm, m·∫Øm t√¥m...), kh·∫©u v·ªã ph√¢n bi·ªát r√µ 3 mi·ªÅn." },
            { id: 204, chapter: 2, question: "Kh·∫©u v·ªã ng∆∞·ªùi Trung Qu·ªëc?", answer: "C√¢n b·∫±ng √¢m d∆∞∆°ng, ng≈© v·ªã; th√≠ch r∆∞·ª£u m·∫°nh, u·ªëng tr√†; b·ªØa ƒÉn c√≥ ph·∫ßn ch√≠nh v√† ph·∫ßn ƒë·ªôn." },
            { id: 205, chapter: 2, question: "Kh·∫©u v·ªã ng∆∞·ªùi Nh·∫≠t B·∫£n?", answer: "Th√≠ch h·∫£i s·∫£n, m√≥n ƒÉn 5 m√†u, gia v·ªã hƒÉng cay; u·ªëng tr√† ƒë·∫°o, r∆∞·ª£u sake; ƒÉn b·∫±ng m·∫Øt (ngh·ªá thu·∫≠t)." },
            { id: 206, chapter: 2, question: "Kh·∫©u v·ªã ng∆∞·ªùi Ph√°p?", answer: "C·∫ßu k·ª≥, s√†nh ƒëi·ªáu; b·ªØa t·ªëi c√≥ s√∫p; d√πng s·ªët v√† r∆∞·ª£u trong ch·∫ø bi·∫øn; th√≠ch vang ƒë·ªè, cognac." },
            { id: 207, chapter: 2, question: "Kh·∫©u v·ªã ng∆∞·ªùi Nga?", answer: "Th√≠ch m√≥n quay, h·∫ßm, th·ªãt mu·ªëi, s√∫p (c√≥ th·ªãt); d√πng nhi·ªÅu b∆° s·ªØa, khoai t√¢y; u·ªëng r∆∞·ª£u m·∫°nh ƒë·∫ßu b·ªØa." },
            { id: 208, chapter: 2, question: "Kh·∫©u v·ªã ng∆∞·ªùi √Çu-M·ªπ?", answer: "ƒÇn 3 b·ªØa (s√°ng/t·ªëi ch√≠nh); th√≠ch th·ªãt c·ªët l·∫øt, g√†, ƒë·ªì h·ªôp; u·ªëng r∆∞·ª£u m·∫°nh v·ªõi ƒë√°; phong c√°ch ƒÉn nhanh, s·∫°ch s·∫Ω." },
            { id: 209, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 1?", answer: "Chu·∫©n b·ªã: V·ªá sinh, setup b√†n, ki·ªÉm tra d·ª•ng c·ª•, ƒë·ªì u·ªëng, th·ª±c ƒë∆°n." },
            { id: 210, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 2?", answer: "Ch√†o ƒë√≥n v√† x·∫øp ch·ªó: Ch√†o kh√°ch, h·ªèi ƒë·∫∑t b√†n, d·∫´n v√†o b√†n, m·ªùi n∆∞·ªõc." },
            { id: 211, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 3?", answer: "Ti·∫øp nh·∫≠n y√™u c·∫ßu: Tr√¨nh th·ª±c ƒë∆°n, t∆∞ v·∫•n, ghi order." },
            { id: 212, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 4?", answer: "Chuy·ªÉn order: Chuy·ªÉn cho b·∫øp/bar v√† thu ng√¢n." },
            { id: 213, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 5?", answer: "ƒêi·ªÅu ch·ªânh d·ª•ng c·ª•: Mang d·ª•ng c·ª• ph√π h·ª£p m√≥n ƒÉn, thu d·ª•ng c·ª• th·ª´a." },
            { id: 214, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 6?", answer: "Ph·ª•c v·ª•: Mang ƒë·ªì u·ªëng/m√≥n ƒÉn, ki·ªÉm tra ƒë√∫ng order, quan s√°t h·ªó tr·ª£ kh√°ch." },
            { id: 215, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 7?", answer: "Thanh to√°n: X√°c ƒë·ªãnh c√°ch thanh to√°n, ki·ªÉm tra h√≥a ƒë∆°n, nh·∫≠n ti·ªÅn, xin √Ω ki·∫øn." },
            { id: 216, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 8?", answer: "Ti·ªÖn kh√°ch: K√©o gh·∫ø, l·∫•y m≈© √°o, ch√†o v√† h·∫πn g·∫∑p l·∫°i." },
            { id: 217, chapter: 2, question: "Quy tr√¨nh A la carte: B∆∞·ªõc 9?", answer: "D·ªçn d·∫πp: Thu d·ªçn, setup l·∫°i b√†n cho kh√°ch m·ªõi." },
            { id: 218, chapter: 2, question: "Quy tr√¨nh Set menu: B∆∞·ªõc 1?", answer: "Chu·∫©n b·ªã: V·ªá sinh, setup b√†n theo th·ª±c ƒë∆°n, n·∫Øm v·ªØng th·ª±c ƒë∆°n." },
            { id: 219, chapter: 2, question: "Quy tr√¨nh Set menu: B∆∞·ªõc 2?", answer: "Ch√†o ƒë√≥n: X√°c ƒë·ªãnh ƒëo√†n kh√°ch, d·∫´n v√†o b√†n, m·ªùi n∆∞·ªõc." },
            { id: 220, chapter: 2, question: "Quy tr√¨nh Set menu: B∆∞·ªõc 3?", answer: "Ph·ª•c v·ª•: ƒê·ªì u·ªëng khai v·ªã, m√≥n ƒÉn theo th·ª© t·ª± (khai v·ªã -> ch√≠nh -> tr√°ng mi·ªáng)." },
            { id: 221, chapter: 2, question: "Quy tr√¨nh Set menu: B∆∞·ªõc 4?", answer: "Thanh to√°n: Ki·ªÉm tra m√≥n, h√≥a ƒë∆°n, th·ª±c hi·ªán thanh to√°n." },
            { id: 222, chapter: 2, question: "Quy tr√¨nh Buffet: B∆∞·ªõc 1?", answer: "Chu·∫©n b·ªã: V·ªá sinh, d·ª•ng c·ª• buffet, k√™ b√†n, b√†y m√≥n, setup b√†n ƒÉn." },
            { id: 223, chapter: 2, question: "Quy tr√¨nh Buffet: B∆∞·ªõc 2?", answer: "Ch√†o ƒë√≥n: H∆∞·ªõng d·∫´n mua v√©/nh·∫≠n phi·∫øu, d·∫´n v√†o ph√≤ng ƒÉn." },
            { id: 224, chapter: 2, question: "Quy tr√¨nh Buffet: B∆∞·ªõc 3?", answer: "Ph·ª•c v·ª•: Bao qu√°t qu·∫ßy line, b·ªï sung ƒë·ªì ƒÉn/d·ª•ng c·ª•, thu d·ªçn ƒëƒ©a b·∫©n." },
            { id: 225, chapter: 2, question: "Quy tr√¨nh Buffet: B∆∞·ªõc 4?", answer: "Thanh to√°n v√† ti·ªÖn kh√°ch: Thu ph√≠ ph·ª• tr·ªôi (n·∫øu c√≥), c·∫£m ∆°n kh√°ch." },
            { id: 226, chapter: 2, question: "Quy tr√¨nh Room Service: B∆∞·ªõc 1?", answer: "Ti·∫øp nh·∫≠n: Nh·∫≠n order (th·∫ª treo/ƒëi·ªán tho·∫°i), t·ªïng h·ª£p nhu c·∫ßu." },
            { id: 227, chapter: 2, question: "Quy tr√¨nh Room Service: B∆∞·ªõc 2?", answer: "Chu·∫©n b·ªã: Xe ƒë·∫©y/khay, d·ª•ng c·ª•, ƒë·ªì ƒÉn (che ƒë·∫≠y), h√≥a ƒë∆°n." },
            { id: 228, chapter: 2, question: "Quy tr√¨nh Room Service: B∆∞·ªõc 3?", answer: "Ph·ª•c v·ª•: V·∫≠n chuy·ªÉn, xin v√†o ph√≤ng, b√†y ƒë·ªì, xin ch·ªØ k√Ω, c·∫£m ∆°n." },
            { id: 229, chapter: 2, question: "Quy tr√¨nh Room Service: B∆∞·ªõc 4?", answer: "Thu d·ªçn: Xin v√†o ph√≤ng, thu d·ª•ng c·ª•, chuy·ªÉn v·ªÅ b·ªô ph·∫≠n." }
        ];

        // CH∆Ø∆†NG 3: KI·∫æN TH·ª®C ƒê·ªí U·ªêNG
        const ch3_questions = [
            { id: 301, chapter: 3, question: "Kh√°i ni·ªám ƒë·ªì u·ªëng?", answer: "Ch·∫•t l·ªèng ch·∫ø bi·∫øn ho·∫∑c t·ª± nhi√™n, gi√∫p gi·∫£i nhi·ªát, gi·∫£i kh√°t, cung c·∫•p nƒÉng l∆∞·ª£ng." },
            { id: 302, chapter: 3, question: "R∆∞·ª£u vang l√† g√¨?", answer: "R∆∞·ª£u l√™n men t·ª± nhi√™n t·ª´ n∆∞·ªõc qu·∫£ (ch·ªß y·∫øu l√† nho)." },
            { id: 303, chapter: 3, question: "Vang ƒë·ªè (Red Wine)?", answer: "L√™n men t·ª´ n∆∞·ªõc v√† v·ªè nho ƒë·ªè/ƒëen. V·ªè t·∫°o m√†u v√† tannin. ·ª¶ l√¢u h∆°n vang tr·∫Øng." },
            { id: 304, chapter: 3, question: "Ph·ª•c v·ª• Vang ƒë·ªè?", answer: "Nhi·ªát ƒë·ªô 16-18¬∞C. Ly ch√¢n cao, b·∫ßu to (190-240ml). Kh√¥ng c·∫ßn x√¥ ƒë√°. R√≥t 1/2 ly." },
            { id: 305, chapter: 3, question: "Vang tr·∫Øng (White Wine)?", answer: "L√™n men t·ª´ n∆∞·ªõc √©p nho (b·ªè v·ªè). M√†u v√†ng nh·∫°t/tr·∫Øng. Chua nh·∫π." },
            { id: 306, chapter: 3, question: "Ph·ª•c v·ª• Vang tr·∫Øng?", answer: "Nhi·ªát ƒë·ªô 9-12¬∞C. Ly ch√¢n cao, b·∫ßu nh·ªè h∆°n (150ml). C·∫ßn x√¥ ƒë√°. R√≥t 2/3 ly." },
            { id: 307, chapter: 3, question: "Vang h·ªìng (Rose Wine)?", answer: "L√™n men t·ª´ nho ƒë·ªè nh∆∞ng v·ªè ti·∫øp x√∫c ng·∫Øn. M√†u h·ªìng. √çt ch√°t." },
            { id: 308, chapter: 3, question: "Vang s·ªßi b·ªçt (Sparkling Wine)?", answer: "Vang c√≥ kh√≠ CO2 (t·ª± nhi√™n ho·∫∑c n·∫°p v√†o). Ph·ª•c v·ª• l·∫°nh 6-9¬∞C. Ly ·ªëng/b√°n c·∫ßu." },
            { id: 309, chapter: 3, question: "Vang c∆∞·ªùng h√≥a (Fortified Wine)?", answer: "Vang ƒë∆∞·ª£c th√™m r∆∞·ª£u m·∫°nh (Brandy). Sweet (th√™m trong khi l√™n men) ho·∫∑c Dry (th√™m sau)." },
            { id: 310, chapter: 3, question: "Vang m√πi (Aromatized Wine)?", answer: "Vang c∆∞·ªùng h√≥a th√™m h∆∞∆°ng th·∫£o m·ªôc (VD: Vermouth). D√πng khai v·ªã ho·∫∑c pha ch·∫ø." },
            { id: 311, chapter: 3, question: "Nguy√™n t·∫Øc k·∫øt h·ª£p Vang - M√≥n ƒÉn?", answer: "Vang ƒë·ªè + Th·ªãt ƒë·ªè. Vang tr·∫Øng + Th·ªãt tr·∫Øng/H·∫£i s·∫£n. Vang h·ªìng + M√≥n trung t√≠nh. Vang ng·ªçt + Tr√°ng mi·ªáng." },
            { id: 312, chapter: 3, question: "B·∫£o qu·∫£n r∆∞·ª£u vang?", answer: "Nhi·ªát ƒë·ªô 13-15¬∞C, √≠t √°nh s√°ng, ƒë·∫∑t n·∫±m ngang (ƒë·ªÉ n√∫t b·∫ßn ·∫©m), kh√¥ng rung l·∫Øc." },
            { id: 313, chapter: 3, question: "R∆∞·ª£u Brandy?", answer: "Ch∆∞ng c·∫•t t·ª´ tr√°i c√¢y (nho, t√°o...). ·ª¶ th√πng s·ªìi. 40% Vol. M√πi g·ªó s·ªìi. Ly Tulip/Snifter." },
            { id: 314, chapter: 3, question: "R∆∞·ª£u Whisky?", answer: "Ch∆∞ng c·∫•t t·ª´ ng≈© c·ªëc (l√∫a m·∫°ch, ng√¥...). ·ª¶ th√πng s·ªìi. M√πi kh√≥i. Ly Rock (c·ªëc c·ªëi th·∫•p)." },
            { id: 315, chapter: 3, question: "C√°c lo·∫°i Whisky n·ªïi ti·∫øng?", answer: "Scotch (Scotland), American (M·ªπ - Bourbon), Canadian, Irish." },
            { id: 316, chapter: 3, question: "R∆∞·ª£u Rum?", answer: "Ch∆∞ng c·∫•t t·ª´ m√≠a/r·ªâ ƒë∆∞·ªùng. Light, Gold, Dark Rum. D√πng pha ch·∫ø (Mojito...)." },
            { id: 317, chapter: 3, question: "R∆∞·ª£u Vodka?", answer: "Ch∆∞ng c·∫•t t·ª´ ng≈© c·ªëc/khoai t√¢y. L·ªçc than ho·∫°t t√≠nh. Kh√¥ng m√†u, kh√¥ng m√πi. D√πng pha ch·∫ø." },
            { id: 318, chapter: 3, question: "R∆∞·ª£u Gin?", answer: "Ch∆∞ng c·∫•t t·ª´ ng≈© c·ªëc + qu·∫£ b√°ch x√π (Juniper) + th·∫£o m·ªôc. M√πi b√°ch x√π ƒë·∫∑c tr∆∞ng." },
            { id: 319, chapter: 3, question: "R∆∞·ª£u Tequila?", answer: "Ch∆∞ng c·∫•t t·ª´ c√¢y Blue Agave (Mexico). Blanco, Gold, Anejo. U·ªëng shot ho·∫∑c pha ch·∫ø." },
            { id: 320, chapter: 3, question: "Quy t·∫Øc ph·ª•c v·ª• r∆∞·ª£u vang trong b·ªØa ƒÉn?", answer: "Nh·∫π tr∆∞·ªõc n·∫∑ng sau; Tr·∫Øng tr∆∞·ªõc ƒê·ªè sau; Chua tr∆∞·ªõc Ng·ªçt sau; Th∆∞·ªùng tr∆∞·ªõc Ngon sau." }
        ];

        // CH∆Ø∆†NG 4: T·ªî CH·ª®C TI·ªÜC & H·ªòI NGH·ªä
        const ch4_questions = [
            { id: 401, chapter: 4, question: "N√™u kh√°i ni·ªám, ph√¢n lo·∫°i ti·ªác?", answer: "Kh√°i ni·ªám: Ti·ªác l√† b·ªØa ƒÉn long tr·ªçng v√† th·ªãnh so·∫°n, nhi·ªÅu ng∆∞·ªùi tham gia nh·∫±m th·ª±c hi·ªán nh·ªØng m·ª•c ƒë√≠ch ƒë·ªÉ ti·∫øp kh√°ch, chi√™u ƒë√£i b·∫°n b√® ho·∫∑c v√¨ m·ªôt m·ª•c ƒë√≠ch n√†o ƒë√≥.\n\nPh√¢n lo·∫°i ti·ªác:\n- Theo h√¨nh th·ª©c t·ªï ch·ª©c: Ti·ªác ng·ªìi, Ti·ªác ƒë·ª©ng (Standing Buffet, Sitting Buffet, Handing Buffet, Coffee break)\n- Theo thi·∫øt k·∫ø: ƒê·∫°i ti·ªác, Y·∫øn ti·ªác, V≈© ti·ªác, Ti·ªác tr√†, Ti·ªác c√† ph√™, Ti·ªác cocktail\n- Theo √ù nghƒ©a, n·ªôi dung ti·ªác: Ti·ªác ngo·∫°i giao, Ti·ªác chi√™u ƒë√£i, Ti·ªác li√™n hoan, Ti·ªác h·ªôi th·∫£o, Ti·ªác h·ªôi ngh·ªã, Ti·ªác h·ªçp m·∫∑t, Ti·ªác tri·ªÉn l√£m\n- Theo ƒê·ªãa ƒëi·ªÉm: Ti·ªác trong nh√†, ti·ªác ngo√†i tr·ªùi, ti·ªác l∆∞u ƒë·ªông\n- Theo Th·ªùi gian: Ti·ªác s√°ng, Ti·ªác tr∆∞a, Ti·ªác t·ªëi, Ti·ªác ƒë√™m" },
            { id: 402, chapter: 4, question: "N√™u kh√°i ni·ªám, ph√¢n lo·∫°i v√† ƒë·∫∑c ƒëi·ªÉm c·ªßa ti·ªác ng·ªìi?", answer: "Kh√°i ni·ªám: Ti·ªác ng·ªìi l√† lo·∫°i ti·ªác trong ƒë√≥ kh√°ch ng·ªìi t·∫°i b√†n khi ƒÉn ti·ªác m√† kh√¥ng ph·∫£i r·ªùi kh·ªèi b√†n ƒë·ªÉ l·∫•y th·ª©c ƒÉn, c√≥ nh√¢n vi√™n ph·ª•c v·ª• t·∫°i ch·ªó m√≥n ƒÉn, ƒë·ªì u·ªëng.\n\nƒê·∫∑c ƒëi·ªÉm:\n- Th·ªùi gian: 1-2h (b·ªØa ch√≠nh)\n- S·ªë l∆∞·ª£ng kh√°ch nhi·ªÅu, x√°c ƒë·ªãnh, ng·ªìi theo ng√¥i th·ª©\n- M·ª•c ƒë√≠ch: Ti·ªác c∆∞·ªõi, chi√™u ƒë√£i, ngo·∫°i giao\n- Kh√¥ng kh√≠ th√¢n m·∫≠t, l·ªãch s·ª±, c√≥ di·ªÖn vƒÉn\n- Th·ª±c ƒë∆°n nhi·ªÅu m√≥n (√Å/√Çu >= 3 m√≥n n√≥ng), c√≥ th·ª±c ƒë∆°n t·∫°i b√†n\n- Ph·ª•c v·ª• tr·ª±c ti·∫øp t·∫°i b√†n, chu ƒë√°o\n- ƒÇn theo tr√¨nh t·ª± th·ª±c ƒë∆°n, c√≥ th·ªÉ m·ªùi r∆∞·ª£u khai v·ªã" },
            { id: 403, chapter: 4, question: "N√™u kh√°i ni·ªám, ph√¢n lo·∫°i v√† ƒë·∫∑c ƒëi·ªÉm c·ªßa ti·ªác ƒë·ª©ng?", answer: "Kh√°i ni·ªám: Kh√°ch r·ªùi b√†n ƒë·ªÉ l·∫•y th·ª©c ƒÉn.\n\nPh√¢n lo·∫°i:\n- Standing Party: ƒÇn b·∫±ng dƒ©a, ƒë·ª©ng ƒÉn, kh√¥ng b√†n ti·ªác.\n- Cocktail Party: Ti·ªác r∆∞·ª£u ƒë·ª©ng, ƒë·ªì u·ªëng l√† ch√≠nh (cocktail, bia...), ƒë·ªì ƒÉn nh·∫π (fingerfood).\n- Buffet Party: Ti·ªác l·ªõn, c√≥ qu·∫ßy line v√† b√†n ƒÉn setup s·∫µn. Kh√°ch t·ª± l·∫•y ƒë·ªì ƒÉn, c√≥ th·ªÉ ƒë∆∞·ª£c ph·ª•c v·ª• ƒë·ªì u·ªëng.\n- Coffee/Tea break: Ti·ªác tr√†/c√† ph√™ gi·ªØa gi·ªù h·ªôi ngh·ªã, ƒÉn nh·∫π (b√°nh, hoa qu·∫£).\n- Outside Catering: Ti·ªác l∆∞u ƒë·ªông b√™n ngo√†i.\n\nƒê·∫∑c ƒëi·ªÉm:\n- Th·ªùi gian linh ho·∫°t, ng·∫Øn\n- Kh√°ch ƒë√¥ng, kh√¥ng x√°c ƒë·ªãnh ch√≠nh x√°c\n- M·ª•c ƒë√≠ch ƒëa d·∫°ng (khai tr∆∞∆°ng, sinh nh·∫≠t...)\n- Kh√¥ng kh√≠ c·ªüi m·ªü\n- Th·ª±c ƒë∆°n phong ph√∫, kh√¥ng ƒë·∫∑t th·ª±c ƒë∆°n t·∫°i b√†n (c√≥ t√™n m√≥n)\n- Kh√°ch t·ª± ph·ª•c v·ª• l√† ch√≠nh" },
            { id: 404, chapter: 4, question: "Ph√¢n t√≠ch c√°c b∆∞·ªõc quy tr√¨nh ph·ª•c v·ª• ti·ªác?", answer: "B∆∞·ªõc 1: T√¨m hi·ªÉu th√¥ng tin (Ti·∫øp nh·∫≠n, x√°c ƒë·ªãnh kh·∫£ nƒÉng, l·∫≠p k·∫ø ho·∫°ch, ph√¢n c√¥ng).\nB∆∞·ªõc 2: H·ªôi √Ω, ph√¢n c√¥ng nhi·ªám v·ª•.\nB∆∞·ªõc 3: Chu·∫©n b·ªã tr∆∞·ªõc gi·ªù ph·ª•c v·ª• (V·ªá sinh, ph∆∞∆°ng ti·ªán, d·ª•ng c·ª•, k√™ b√†n gh·∫ø, ƒë·ªì u·ªëng).\nB∆∞·ªõc 4: Trang tr√≠ ph√≤ng ti·ªác.\nB∆∞·ªõc 5: Ki·ªÉm tra, r√† so√°t.\nB∆∞·ªõc 6: ƒê√≥n ti·∫øp, ch√†o h·ªèi, h∆∞·ªõng d·∫´n kh√°ch.\nB∆∞·ªõc 7: Ph·ª•c v·ª• ƒë·ªì u·ªëng (Ki·ªÉm tra, ∆∞·ªõp l·∫°nh, r√≥t r∆∞·ª£u).\nB∆∞·ªõc 8: Ph·ª•c v·ª• m√≥n ƒÉn (Ki·ªÉm tra, m·ªùi m√≥n, ph·ª•c v·ª• ƒë√∫ng k·ªπ thu·∫≠t).\nB∆∞·ªõc 9: Thanh to√°n v√† k·∫øt th√∫c (Thanh to√°n, xin √Ω ki·∫øn, ti·ªÖn kh√°ch).\nB∆∞·ªõc 10: Thu d·ªçn sau ph·ª•c v·ª•.\nB∆∞·ªõc 11: ƒê√°nh gi√° c√¥ng t√°c ph·ª•c v·ª• (R√∫t kinh nghi·ªám)." },
            { id: 405, chapter: 4, question: "Ph√¢n t√≠ch c√°c b∆∞·ªõc quy tr√¨nh ph·ª•c v·ª• h·ªôi ngh·ªã h·ªôi th·∫£o?", answer: "B∆∞·ªõc 1: T√¨m hi·ªÉu th√¥ng tin (H·ª£p ƒë·ªìng, k·∫ø ho·∫°ch, ph√¢n c√¥ng, d·ª± ki·∫øn).\nB∆∞·ªõc 2: H·ªôi √Ω, ph√¢n c√¥ng nhi·ªám v·ª•.\nB∆∞·ªõc 3: Chu·∫©n b·ªã (V·ªá sinh, thi·∫øt b·ªã nghe nh√¨n, trang tr√≠, n∆∞·ªõc u·ªëng, t√†i li·ªáu).\nB∆∞·ªõc 4: Trang tr√≠ ph√≤ng h·ªôi ngh·ªã.\nB∆∞·ªõc 5: Ki·ªÉm tra, r√† so√°t.\nB∆∞·ªõc 6: ƒê√≥n ti·∫øp (Ch√†o h·ªèi, ph√°t t√†i li·ªáu, h∆∞·ªõng d·∫´n ch·ªó ng·ªìi).\nB∆∞·ªõc 7: Ph·ª•c v·ª• h·ªôi ngh·ªã (V·∫≠n h√†nh thi·∫øt b·ªã, tr·ª±c ph·ª•c v·ª• n∆∞·ªõc, h·ªó tr·ª£).\nB∆∞·ªõc 8: Ph·ª•c v·ª• ƒÉn u·ªëng gi·∫£i lao (Teabreak).\nB∆∞·ªõc 9: Ph·ª•c v·ª• ƒÉn u·ªëng theo h·ª£p ƒë·ªìng (ƒÇn tr∆∞a/t·ªëi).\nB∆∞·ªõc 10: Thanh to√°n h·ª£p ƒë·ªìng.\nB∆∞·ªõc 11: Thu d·ªçn sau ph·ª•c v·ª•." }
        ];

        // CH∆Ø∆†NG 5: L·∫¨P K·∫æ HO·∫†CH & GI√ÅM S√ÅT
        const ch5_questions = [
            { id: 501, chapter: 5, question: "N√™u kh√°i ni·ªám v√† ph√¢n t√≠ch c√°c b∆∞·ªõc l·∫≠p k·∫ø ho·∫°ch v√† gi√°m s√°t khu v·ª±c nh√† h√†ng?", answer: "L·∫¨P K·∫æ HO·∫†CH:\nA. D·ª± b√°o nhu c·∫ßu (CƒÉn c·ª© v√†o bu·ªìng, kh√°ch, d·ªØ li·ªáu c≈©... X√°c ƒë·ªãnh s·ªë kh√°ch, doanh thu, th·ª±c ƒë∆°n).\nB. L·∫≠p k·∫ø ho·∫°ch th·ª±c ƒë∆°n (L·ª±a ch·ªçn m√≥n ƒÉn, x√°c ƒë·ªãnh gi√° b√°n, thi·∫øt k·∫ø menu).\nC. L·∫≠p l·ªãch tr√¨nh ph·ª•c v·ª• (C√°c b∆∞·ªõc t·ª´ chu·∫©n b·ªã ƒë·∫øn thu d·ªçn).\nD. L·∫≠p k·∫ø ho·∫°ch ngu·ªìn l·ª±c (C∆° s·ªü v·∫≠t ch·∫•t, Lao ƒë·ªông).\n\nGI√ÅM S√ÅT:\nA. Gi√°m s√°t chu·∫©n b·ªã (Ngo·∫°i h√¨nh, ph√≤ng ƒÉn, th·ª±c ƒë∆°n, ƒë·∫∑t b√†n).\nB. Gi√°m s√°t ph·ª•c v·ª• (Quy tr√¨nh, thanh to√°n, giao ti·∫øp).\nC. Gi√°m s√°t k·∫øt th√∫c ca (V·ªá sinh, b√°o c√°o, b√†n giao).\nD. Gi√°m s√°t thu chi (Ti·ªÅn m·∫∑t, h√≥a ƒë∆°n, b√°o c√°o)." },
            { id: 502, chapter: 5, question: "Ph√¢n t√≠ch c√°c b∆∞·ªõc l·∫≠p k·∫ø ho·∫°ch v√† gi√°m s√°t c·ªßa b·ªô ph·∫≠n Bar?", answer: "L·∫¨P K·∫æ HO·∫†CH:\nA. D·ª± b√°o nhu c·∫ßu.\nB. K·∫ø ho·∫°ch s·∫£n ph·∫©m/d·ªãch v·ª• (Th·ª±c ƒë∆°n ƒë·ªì u·ªëng: thi·∫øt k·∫ø, l·ª±a ch·ªçn, ƒë·ªãnh gi√°; S·ª± ki·ªán/Gi·∫£i tr√≠).\nC. L·∫≠p l·ªãch tr√¨nh ph·ª•c v·ª•.\nD. K·∫ø ho·∫°ch c∆° s·ªü v·∫≠t ch·∫•t.\nE. K·∫ø ho·∫°ch lao ƒë·ªông.\n\nGI√ÅM S√ÅT:\nA. Gi√°m s√°t pha ch·∫ø (Qu·∫ßy bar, thi·∫øt b·ªã, nguy√™n li·ªáu, ch·∫•t l∆∞·ª£ng ƒë·ªì u·ªëng).\nB. Gi√°m s√°t quy tr√¨nh ph·ª•c v·ª• (ƒê√≥n kh√°ch, ph·ª•c v·ª•, thanh to√°n, d·ªçn d·∫πp)." },
            { id: 503, chapter: 5, question: "Ph√¢n t√≠ch c√°c b∆∞·ªõc l·∫≠p k·∫ø ho·∫°ch v√† gi√°m s√°t c·ªßa b·ªô ph·∫≠n Ti·ªác?", answer: "L·∫¨P K·∫æ HO·∫†CH:\nA. D·ª± b√°o nhu c·∫ßu.\nB. Nh·∫≠n ƒë·∫∑t ti·ªác.\nC. Gi·ªõi thi·ªáu, t∆∞ v·∫•n, th·ªëng nh·∫•t.\nD. H·ª£p ƒë·ªìng ti·ªác.\nE. L·∫≠p k·∫ø ho·∫°ch ph·ª•c v·ª• (Ch∆∞∆°ng tr√¨nh, t·∫≠p d∆∞·ª£t, trang tr√≠, d·ª•ng c·ª•).\nF. K·∫ø ho·∫°ch nguy√™n v·∫≠t li·ªáu.\nG. K·∫ø ho·∫°ch lao ƒë·ªông.\n\nGI√ÅM S√ÅT:\nA. Gi√°m s√°t chu·∫©n b·ªã (Trang tr√≠, setup b√†n, √¢m thanh √°nh s√°ng).\nB. Gi√°m s√°t ph·ª•c v·ª• (Quy tr√¨nh, ƒëi·ªÅu ph·ªëi b·∫øp-ti·ªác, gi·∫£i quy·∫øt s·ª± c·ªë).\nC. Gi√°m s√°t sau ti·ªác (D·ªçn d·∫πp, ki·ªÉm k√™, thanh to√°n, ƒë√°nh gi√°)." }
        ];

        // CH∆Ø∆†NG 7: QU·∫¢N TR·ªä DOANH THU & CHI PH√ç
        const ch7_questions = [
            { id: 701, chapter: 7, question: "N√™u kh√°i ni·ªám v√† ƒëi·ªÅu ki·ªán √°p d·ª•ng qu·∫£n tr·ªã doanh thu nh√† h√†ng?", answer: "Kh√°i ni·ªám: Ho·∫°ch ƒë·ªãnh chi·∫øn l∆∞·ª£c nh·∫±m b√°n ƒë√∫ng ch·ªó ng·ªìi, ƒë√∫ng kh√°ch, ƒë√∫ng gi√°, ƒë√∫ng th·ªùi gian, ƒë√∫ng k√™nh ƒë·ªÉ t·ªëi ∆∞u l·ª£i nhu·∫≠n.\n\nM·ª•c ti√™u: T·ªëi ƒëa h√≥a l·ª£i nhu·∫≠n, c√¢n b·∫±ng cung c·∫ßu.\n\nƒêi·ªÅu ki·ªán √°p d·ª•ng:\n- Cung c·ªë ƒë·ªãnh, c·∫ßu bi·∫øn ƒë·ªông.\n- S·∫£n ph·∫©m ƒë·∫∑t tr∆∞·ªõc ƒë∆∞·ª£c.\n- Kh√¥ng l∆∞u kho ƒë∆∞·ª£c.\n- Chi ph√≠ c·ªë ƒë·ªãnh cao, bi·∫øn ƒë·ªïi th·∫•p.\n- Nhu c·∫ßu thay ƒë·ªïi theo th·ªùi gian.\n- H·ªá th·ªëng gi√° linh ho·∫°t." },
            { id: 702, chapter: 7, question: "Ph√¢n t√≠ch n·ªôi dung qu·∫£n tr·ªã doanh thu nh√† h√†ng?", answer: "A. Qu·∫£n tr·ªã nƒÉng l·ª±c (T·ªëi ƒëa s·ª©c ch·ª©a, s·∫Øp x·∫øp b√†n, qu·∫£n l√Ω ƒë·∫∑t b√†n).\nB. Qu·∫£n tr·ªã th·ªùi gian tr·∫£ b√†n (TƒÉng v√≤ng quay b√†n: nh·∫°c/√°nh s√°ng, menu nhanh, thao t√°c nhanh).\nC. T·ªëi ∆∞u h√≥a th·ª±c ƒë∆°n (Menu engineering: m√≥n l·ª£i nhu·∫≠n cao, v·ªã tr√≠ v√†ng).\nD. Qu·∫£n tr·ªã gi√° (Gi√° linh ho·∫°t theo gi·ªù/ng√†y/ƒë·ªëi t∆∞·ª£ng).\nE. ƒêa d·∫°ng k√™nh ph√¢n ph·ªëi (T·∫°i ch·ªó, mang v·ªÅ, online).\nF. K·ªπ thu·∫≠t b√°n tƒÉng doanh thu (Upselling, Cross-selling)." },
            { id: 703, chapter: 7, question: "N√™u kh√°i ni·ªám v√† n·ªôi dung c·ªßa ki·ªÉm so√°t chi ph√≠?", answer: "Kh√°i ni·ªám: So s√°nh chi ph√≠ th·ª±c t·∫ø v·ªõi d·ª± to√°n/ƒë·ªãnh m·ª©c.\n\nN·ªôi dung:\nA. Ki·ªÉm so√°t mua h√†ng (Quy tr√¨nh mua, nh·∫≠n h√†ng, l∆∞u kho).\nB. Ki·ªÉm so√°t chi ph√≠ nh√¢n c√¥ng (NƒÉng su·∫•t, ƒë·ªãnh bi√™n, s·∫Øp x·∫øp ca).\nC. Ki·ªÉm so√°t ƒëi·ªán n∆∞·ªõc (Ti·∫øt ki·ªám, gi√°m s√°t).\nD. Ki·ªÉm so√°t chi ph√≠ m√≥n ƒÉn/ƒë·ªì u·ªëng (ƒê·ªãnh m·ª©c ti√™u hao, c√¥ng th·ª©c ti√™u chu·∫©n, gi√° v·ªën).\nE. Nh·∫≠n di·ªán y·∫øu t·ªë ·∫£nh h∆∞·ªüng (Sai s√≥t, l√£ng ph√≠, m·∫•t m√°t, qu·∫£n l√Ω k√©m)." }
        ];

        // Combine all questions for both modes
        const fillQuestions = [...ch1_questions, ...ch2_questions, ...ch3_questions, ...ch4_questions, ...ch5_questions, ...ch7_questions];
        const essayQuestions = [...ch1_questions, ...ch2_questions, ...ch3_questions, ...ch4_questions, ...ch5_questions, ...ch7_questions];
    </script>
    <script>
        let currentMode = '';
        let currentQuestions = [];
        let currentQuestionId = null;
        let selectedChapters = [];

        // Load status from local storage
        function getQuestionStatus(id) {
            const key = `flashcard_status_${currentMode}`;
            const saved = localStorage.getItem(key);
            const statusMap = saved ? JSON.parse(saved) : {};
            return statusMap[id] || null;
        }

        function saveQuestionStatus(id, status) {
            const key = `flashcard_status_${currentMode}`;
            const saved = localStorage.getItem(key);
            const statusMap = saved ? JSON.parse(saved) : {};
            statusMap[id] = status;
            localStorage.setItem(key, JSON.stringify(statusMap));
        }

        function resetStatus() {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô tr·∫°ng th√°i v√† ƒë√°p √°n c·ªßa ch·∫ø ƒë·ªô n√†y kh√¥ng?')) {
                // Clear status
                const statusKey = `flashcard_status_${currentMode}`;
                localStorage.removeItem(statusKey);

                // Clear saved answers for current mode
                const keysToRemove = [];
                const answerPrefix = `flashcard_answer_${currentMode}_`;

                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key.startsWith(answerPrefix)) {
                        keysToRemove.push(key);
                    }
                }

                keysToRemove.forEach(key => localStorage.removeItem(key));

                showMap();
            }
        }

        function startApp(mode) {
            currentMode = mode;

            // Get selected chapters
            const checkboxes = document.querySelectorAll('.chapter-selection input:checked');
            selectedChapters = Array.from(checkboxes).map(cb => parseInt(cb.value));

            if (selectedChapters.length === 0) {
                alert('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt ch∆∞∆°ng!');
                return;
            }

            // Filter questions based on mode and chapter
            const sourceQuestions = (currentMode === 'essay') ? essayQuestions : fillQuestions;
            currentQuestions = sourceQuestions.filter(q => selectedChapters.includes(q.chapter));

            if (currentQuestions.length === 0) {
                alert('Kh√¥ng c√≥ c√¢u h·ªèi n√†o cho ch∆∞∆°ng ƒë√£ ch·ªçn.');
                return;
            }

            document.getElementById('setup-screen').classList.remove('active');
            showMap();
        }

        function showMap() {
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('map-screen').classList.add('active');

            const mapContainer = document.getElementById('question-map');
            mapContainer.innerHTML = '';

            let memorizedCount = 0;

            currentQuestions.forEach((q, index) => {
                const status = getQuestionStatus(q.id);
                if (status === 'memorized') memorizedCount++;

                const item = document.createElement('div');
                item.className = `map-item ${status || ''}`;
                item.textContent = index + 1;
                item.onclick = () => playQuestion(q.id);
                mapContainer.appendChild(item);
            });

            // Update stats
            document.getElementById('memorized-count').textContent = memorizedCount;
            document.getElementById('total-count').textContent = currentQuestions.length;
        }

        // Answer Persistence Logic
        function getUserAnswer(id) {
            const key = `flashcard_answer_${currentMode}_${id}`;
            const saved = localStorage.getItem(key);
            return saved ? JSON.parse(saved) : null;
        }

        function saveUserAnswer(id, answer) {
            const key = `flashcard_answer_${currentMode}_${id}`;
            localStorage.setItem(key, JSON.stringify(answer));
        }

        function playQuestion(id) {
            currentQuestionId = id;
            const question = currentQuestions.find(q => q.id === id);

            document.getElementById('map-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');

            renderSidebar();
            showQuestion(question);
        }

        function renderSidebar() {
            const sidebar = document.getElementById('question-sidebar');
            sidebar.innerHTML = '';

            currentQuestions.forEach((q, index) => {
                const status = getQuestionStatus(q.id);
                const item = document.createElement('div');
                item.className = `sidebar-item ${status || ''} ${q.id === currentQuestionId ? 'active' : ''}`;
                item.textContent = `C√¢u ${index + 1}`;
                item.onclick = () => playQuestion(q.id);
                sidebar.appendChild(item);
            });

            // Scroll active item into view
            setTimeout(() => {
                const activeItem = sidebar.querySelector('.active');
                if (activeItem) {
                    activeItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            }, 100);
        }

        function showQuestion(question) {
            const container = document.getElementById('card-container');
            const checkBtn = document.getElementById('check-btn');
            const statusBtns = document.getElementById('status-btns');
            const answerBox = document.getElementById('correct-answer-box');
            const answerText = document.getElementById('correct-answer-text');

            // Reset UI state
            checkBtn.style.display = 'block';
            statusBtns.style.display = 'none';
            answerBox.style.display = 'none';

            // Check if already answered/status saved
            const status = getQuestionStatus(question.id);
            if (status) {
                checkBtn.style.display = 'none';
                statusBtns.style.display = 'flex';
                answerBox.style.display = 'block';
                answerText.textContent = question.answer;
                updateStatusUI(status);
            }

            // Update stats
            const index = currentQuestions.findIndex(q => q.id === question.id);
            document.getElementById('question-count').textContent = `C√¢u ${index + 1}/${currentQuestions.length}`;

            container.innerHTML = '';

            if (currentMode === 'essay') {
                renderEssay(question, container);
            } else {
                renderFillBlank(question, container);
            }
        }

        function renderEssay(question, container) {
            const qEl = document.createElement('div');
            qEl.className = 'question';
            qEl.textContent = question.question;
            container.appendChild(qEl);

            const textarea = document.createElement('textarea');
            textarea.className = 'essay-input';
            textarea.placeholder = 'Nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n t·∫°i ƒë√¢y...';

            // Restore saved answer
            const savedAnswer = getUserAnswer(question.id);
            if (savedAnswer) {
                textarea.value = savedAnswer;
            }

            // Save on input
            textarea.addEventListener('input', (e) => {
                saveUserAnswer(question.id, e.target.value);
            });

            container.appendChild(textarea);
        }

        function renderFillBlank(question, container) {
            const qEl = document.createElement('div');
            qEl.className = 'question';
            qEl.textContent = question.question;
            container.appendChild(qEl);

            const blankArea = document.createElement('div');
            blankArea.className = 'blank-area';

            // Logic to hide key words: hide words longer than 4 chars (fewer blanks)
            const words = question.answer.split(' ');
            let html = '';

            words.forEach((word, index) => {
                const cleanWord = word.replace(/[.,;:"()]/g, '');
                // Hide if length > 4 (hide fewer words) and not a number
                if (cleanWord.length > 4 && isNaN(cleanWord)) {
                    const prefix = word.match(/^[.,;:"(]*/) ? word.match(/^[.,;:"(]*/)[0] : '';
                    const suffix = word.match(/[.,;:")]+$/) ? word.match(/[.,;:")]+$/)[0] : '';
                    const coreWord = word.substring(prefix.length, word.length - suffix.length);

                    // Add data-index to identify inputs uniquely within the question
                    html += `${prefix}<input type="text" class="blank-input" data-index="${index}" data-answer="${coreWord}" placeholder="..."> ${suffix} `;
                } else {
                    html += `${word} `;
                }
            });

            blankArea.innerHTML = html;
            container.appendChild(blankArea);

            // Restore saved answers
            const savedAnswers = getUserAnswer(question.id) || {};
            const inputs = blankArea.querySelectorAll('.blank-input');
            inputs.forEach(input => {
                const idx = input.dataset.index;
                if (savedAnswers[idx]) {
                    input.value = savedAnswers[idx];
                }

                // Save on input
                input.addEventListener('input', (e) => {
                    const currentSaved = getUserAnswer(question.id) || {};
                    currentSaved[idx] = e.target.value;
                    saveUserAnswer(question.id, currentSaved);
                });
            });
        }

        function checkAnswer() {
            const answerBox = document.getElementById('correct-answer-box');
            const answerText = document.getElementById('correct-answer-text');
            const checkBtn = document.getElementById('check-btn');
            const statusBtns = document.getElementById('status-btns');

            const question = currentQuestions.find(q => q.id === currentQuestionId);
            answerText.textContent = question.answer;

            answerBox.style.display = 'block';
            checkBtn.style.display = 'none';
            statusBtns.style.display = 'flex';

            // Reset buttons to active state if no status yet
            updateStatusUI(null);
        }

        function markStatus(status) {
            saveQuestionStatus(currentQuestionId, status);
            updateStatusUI(status);
            renderSidebar();
        }

        function updateStatusUI(status) {
            const memorizedBtn = document.querySelector('#status-btns .btn.success');
            const notMemorizedBtn = document.querySelector('#status-btns .btn.danger');

            // Reset classes first
            memorizedBtn.classList.remove('inactive');
            notMemorizedBtn.classList.remove('inactive');

            if (status === 'memorized') {
                notMemorizedBtn.classList.add('inactive');
            } else if (status === 'not-memorized') {
                memorizedBtn.classList.add('inactive');
            }
        }

        function showResult() {
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('result-screen').classList.add('active');
            document.getElementById('final-score-display').parentElement.style.display = 'none'; // Hide score in result
        }

        function returnToMenu() {
            document.getElementById('result-screen').classList.remove('active');
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('map-screen').classList.remove('active'); // Fix: Hide map screen
            document.getElementById('setup-screen').classList.add('active');
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
    </script>
</body>

</html>